<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <title>Client Work</title>
</head>

<body>
    <h1>Client Work Submission</h1>
    <strong>NAME: </strong> SUMAYYAH MUSA (sbmusa)<br>
    <strong>COURSE: </strong>COMP 6774<br>
    <strong>CLIENT NAME: </strong> Dr. Daniel Fuller <br>

    <h2>Attribution</h2>
    <p>I attest that this submission was done by me (Sumayyah Musa). I used the data source below to get the datasets I worked with, and the materials belowinfluenced my codes and designs.</p>
    <ul>
        <li>Data source: <a href="https://transitfeeds.com/p/metrobus-transit/293" class="href">Metrobus GTFS Data</a></li>
        <li>Materials:
            <ul>
                <li><a href="https://dzone.com/articles/gtfs-transit-data-visualization-in-r" class="href">GTFS Transit Data Visualisation,</a> using R language.</li>
                <li><a href="https://developers.google.com/transit/gtfs/reference#stopstxt">GTFS Dataset Reference</a> - contains the definition of each GTFS text file.</li>
                <li><a href="https://towardsdatascience.com/r-for-gtfs-getting-the-number-of-trips-per-hour-for-each-line-4d22491e3944">R for GTFS,</a> explains how to get the number of trips for each bus route.</li>
                <li><a href="https://www.r-bloggers.com/2014/10/plotting-gtfs-data-with-r-2/">Plotting GTFS Data with R</a></li>
            </ul>
    </ul>

    <h2>Client Interaction and Information</h2>
    <ul>
        <li><b>Communication:</b> The client has been my Graduate Supervisor before getting assigned to him. I didn't need to introduce myself before talking about the case, as there had been some interaction between the client and me. I reached him via Slack
            to talk about the case. I asked a lot of questions just to confirm and make sure I got all my requirements. I requested for some documentations about the case, and he provided me with materials that helped. We had video calls via Google Meet,
            to update him on what I had done so far, at least once a week. If I had more questions, I asked during these meetings and I got swift and positive feedbacks. The stated problem is to visualize Google Transit Feed Specification (GTFS) data,
            and this is related to the client's objectives which are to examine how transportation systems influence physical activity, create national level measures of transit and relate those measures to physical activity, and determine the health
            impacts of transportation interventions in Canada.
        </li>
        <li><b>Client Materials:</b>
            <ul>
                <li><b>Dataset:</b> The
                    <a href="https://transitfeeds.com/p/metrobus-transit/293"> dataset</a> is a zipped file (contains 9 comma delimited text files) of Google Transit Feed Specification (GTFS), <i>a specification that defines a data format for public transportation routes, stop, schedules,
                    and associated geographic information</i>, for <a href="https://en.wikipedia.org/wiki/Metrobus_Transit">Metrobus Transit</a>, the transit agency that provides fixed-route transit services within the municipalities of St. John's, Newfoundland.
                    The data is one of the datasets a transit agency generates and shares openly with the public. GTFS feeds usually contain scheduled transit service information including stop and route locations of a particular transit agency.
                </li>
                <li><b>Code libraries:</b> The code for the visualization was written in
                    <a href="https://www.r-project.org/">R language</a>, and the libraries used were:
                    <ul>
                        <li>
                            <a href="https://www.tidyverse.org/">Tidyverse</a>, a collection of R packages for Data science, and the tidyverse packages used in these submission were:
                            <a href="https://dplyr.tidyverse.org/">dplyr</a>,
                            <a href="https://ggplot2.tidyverse.org/"> ggplot2</a>, and
                            <a href="https://readr.tidyverse.org/">readr</a> for data wrangling and exploratory analysis;</li>
                        <li>
                            <a href="https://rstudio.github.io/leaflet/">Leaflet</a>, a javascript library for making interactive maps, was used for visualization.</li>
                    </ul>
                </li>
            </ul>
            <li><b>Client Instructions: </b>The task as presented by the client was to create a map of the GTFS data for St. John’s Metrobus Transit Agency, showing changes over time due to COVID. He later stated that the maps should show the routes, stops,
                and their trip frequencies, and the resulting product could either be a standalone html file or an animated map.</li>
            <li><b>Client Product: </b>The results were submitted to the client, as a <a href="routes-and-stops.html">standalone html file,</a> and the
                <a href="gtfs-viz.r">R script</a> used in creating the visualizations were also submitted.
            </li>
    </ul>

    <h2>Methods and Design</h2>
    <ul>
        <li><b>Domain: </b> GTFS is the data standard transit agencies use across the world to upload their transit information to Google Maps. The problem was to show the changes in St. John's Metrobus Transit due to COVID from 20th of March, 2020 to 13th
            of September, 2020
        </li>
        <li><b>Wrangling: </b>The dataset was cleaned in R language, using
            <a href="https://rstudio.com/"></a>R Studio. The cleaning and manipulation process took about 80% of the time spent on the project, and it includes:
            <ul>
                <li>Unzipping the folder into a folder that contais 9 text files.</li>
                <li>Joining of dataframes to capture required variables in one dataframe.</li>
                <li>Filtering to select subsets of the data, based on eime, direction of the trip, based on routes, etc.</li>
                <li>Transforming of variables from one class or type to the other.</li>
            </ul>
    </ul>

    <h3>What Analysis</h3>
    <p>The dataset is mostly a <b>Network</b> and <b>Geometry</b> data type. It contains 9 text files that are linked by specific columns, and also contain geographic information.</p>
    <h4>
        agency.txt:
    </h4>
    This dataset <b>defines</b> transit agencies with service represented in this dataset.
    <ul>
        <li>agency_id identifies a transit brandwhich is often synonymous with a transit agency.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>agency_name is the full name of the transit agency.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>agency_url is the url of the transit agency.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>agency_timezone is the timezone where the transit agency is located.
            <ul>
                <li><b>What:</b>Categorical - a region of time.</li>
            </ul>
        </li>
        <li>agency_phone is a voice telephone number for the specified agency.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>agency_fare_url is the URL of a web page that allows a rider to purchase tickets or other fare instruments for that agency online.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>agency_email is the email address actively monitored by the agency’s customer service department.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
    </ul>

    <h4>
        shapes.txt:
    </h4>
    This dataset is a <b>table</b> dataset that describe the rules for mapping vehicle travel paths, sometimes referred to as route alignments.
    <ul>
        <li>shape_id identifies a shape.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>shape_pt_lat is the latitude of a shape point.
            <ul>
                <li><b>What:</b>Categorical - represents a point in space.</li>
            </ul>
        </li>
        <li>shape_pt_lon is the longitude of a shape point.
            <ul>
                <li><b>What:</b>Categorical - represents a point in space.</li>
            </ul>
        </li>
        <li>shape_pt_sequence is the sequence in which the shape points connect to form the shape.
            <ul>
                <li><b>What:</b>Ordinal</li>
            </ul>
        </li>
        <li>shape_dist_traveled is the actual distance traveled along the shape from the first shape point to the point specified in this record.
            <ul>
                <li><b>What:</b>Ordered, ordinal</li>
            </ul>
        </li>
    </ul>

    <h4>
        stops.txt:
    </h4>
    This dataset <b>defines</b> where vehicles pick up or drop off riders. Also defines stations and station entrances.
    <ul>
        <li>stop_id identifies a stop, station, or station entrance.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>stop_code is a short text or a number that identifies the location for riders.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>stop_name is the name of the location. Use a name that people will understand in the local and tourist vernacular.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>stop_desc is description of the location that provides useful, quality information.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>stop_lat is the latitude of a location.
            <ul>
                <li><b>What:</b>Geometry - Latitude</li>
            </ul>
        </li>
        <li>stop_lon is the longitude of a location.
            <ul>
                <li><b>What:</b>Geometry - Longitude</li>
            </ul>
        </li>
        <li>zone_id identifies the fare zone for a stop.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>stop_url is the URL of a web page about the location.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>location_type is type of location.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>parent_station defines hierarchy between the different locations defined in stops.txt.
            <ul>
                <li><b>What:</b>Hierarchial - It contains the ID of the parent location (location_type)</li>
            </ul>
        </li>
        <li>stop_timezone is the timezone of the location.
            <ul>
                <li><b>What:</b>Geometry - region of the agency</li>
            </ul>
        </li>
        <li>wheelchair_boarding indicates whether wheelchair boardings are possible from the location.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
    </ul>

    <h4>
        routes.txt:
    </h4>
    This dataset <b>shows</b> transit routes. A route is a group of trips that are displayed to riders as a single service.
    <ul>
        <li>route_id Identifies a route.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>agency_id is the agency for the specified route.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>route_short_name is the short name of a route.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>route_long_name is the full name of a route.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>route_desc is the description of a route that provides useful, quality information.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>route_type indicates the type of transportation used on a route.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>route_url is the URL of a web page about the particular route.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>route_color is the designation that matches public facing material.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
        <li>route_text_color is the legible color to use for text drawn against a background of route_color.
            <ul>
                <li><b>What:</b>Categorical</li>
            </ul>
        </li>
    </ul>

    <h3>Goals</h3>
    <ul>
        <li><b>Goals:</b> To create a map of the bus routes for ST John's showing changes overtime due to COVID</li>
        <li>Subgoals:
            <ul>
                <li>To show the frequency of trips per hour for a particular day.</li>
                <li>To show the stops and their corresponding frequencies.</li>
            </ul>
        </li>
    </ul>

    <h3>Why Analysis</h3>
    <p><b>Goal:</b> To create a map of the bus routes for ST John's showing changes overtime due to COVID</p>
    <ul>
        <li>Analyze level: Present features - present a map showing all the spatial points on the map of St John's.</li>
        <li>Search level: Locate paths - complete route paths will be located.</li>
        <li>Query level: Identify shapes - Identify the different routes in NL.</li>
    </ul>
    <p><b>Subgoal 1:</b> To show the frequency of trips per hour for a particular day.</p>
    <ul>
        <li>Analyze level: Discover features - Calculate the trip by hour before visualizing.</li>
        <li>Search level: Lookup distribution - Determine the distribution of the frequencies.</li>
        <li>Query level: Compare trends - Compare the frequencies by route with another and determine the busier route and the time that gets busy.</li>
    </ul>
    <p><b>Subgoal 2:</b> To show the stops and their corresponding frequencies.</p>
    <ul>
        <li>Analyze level: Present features - The stops and their frequencies are calculated and presented.</li>
        <li>Search level: Locate topology - Locate the stops after visualization</li>
        <li>Query level: Identify shape - Identify the stop with the highest or lowest frequency.</li>
    </ul>

    <h3>Designs</h3>
    <h4>Visualization 1</h4>
    <p>This page hosts <a href="routes.html">Visualization 2</a>
    </p>
    <ul>
        <li><b>Illustration: </b>A map showing the bus routes of the transit network</li>
        <li><b>Descripton: </b>The illustration uses leaflet in R to draw a map showing the routes (coloured lines). We can toggle the routes we want to view by deselcting and deselecting in the layers group. Routes are labelled and popup enabled.</li>
        <li><b>Purpose: </b>The design shows us the different routes the Metrobus transit takes for complete trips on Saturdays. We can determine the longest and shortest routes from this map.</li>
        <li><b>How Analysis:</b></li>
        <ul>
            <li><b>Idiom:</b> The Spatial Map idiom is used in this design.
            </li>
            <li><b>Marks and Channels:</b> The design uses <b>lines</b> as marks, <b>X position</b> channel to represent longitude, and <b>Area</b> channel to represent istance (how long a route is, as compared to the other routes), <b>Color</b> channel (hue)
                to encode each bus route.
            </li>
            <li><b>Guidelines and Principles:</b> The design is effective in a way that it gives lot of information about the route, though if youre trying to find the longest and shortest route, i can connect that to the <b>Eyes Beat Memory</b> rule of thumb.
                We have to recall how long the previous lines are, to determine the longest and shortest.</li>
        </ul>
    </ul>
    <h4>Visualization 2</h4>
    <div id="myDiv" style="width:80%; height:100%"></div>
    <script type='text/javascript' src='trips-per-hour.js'></script>
    <ul>
        <li><b>Illustration: </b>Barplot of trips per hour</li>
        <li><b>Descripton: </b>The illustration uses Plotly to draw a bar graph of number of trips per hour. The map can be panned and zoomed in and out. It shows different colors for each route.</li>
        <li><b>Purpose: </b>The design makes us know the number of trips going on by hour, and subsequently determine the the changes in the transit network due to the pandemic.</li>
        <li><b>How Analysis:</b></li>
        <ul>
            <li><b>Idiom:</b> The key attribute, time, separates the marks along the horizontal spatial axis. The value attributes, Number of trips, express the value with aligned vertical spatial position and line marks.
            </li>
            <li><b>Marks and Channels:</b> The graph uses <b>lines</b> as marks, <b>X position</b> channel to represent time, and <b>Area</b> channel to represent the quantitative attributes (number of trips).</li>
            <li><b>Guidelines and Principles:</b></li>
        </ul>
    </ul>

    <h4>Visualization 3</h4>
    <p>This page hosts <a href="stops.html">Visualization 3</a>
        <ul>
            <li><b>Illustration: </b>Stops Weighting by Frequency</li>
            <li><b>Descripton: </b>Size of circle markers varies according to trip frequency, stops are labelled, color coded and also pop-up enabled</li>
            <li><b>Purpose: </b>To detect most frequent and less frequent stops</li>
            <li><b>How Analysis:</b></li>
            <ul>
                <li><b>Idiom:</b> Spatial map has been used to encode the bus stops.
                </li>
                <li><b>Marks and Channels:</b> The design uses <b>points</b> as marks, <b>X position</b> channel to represent longitude, <b>Y position</b> to represent latitude and <b>Area</b> channel to represent the frequency of the stops. <b>Color</b>                    channel (luminance) was used to express the weight of each stops.</li>
                <li><b>Guidelines and Principles:</b></li>
            </ul>
        </ul>

        <h3>Originality</h3>
        <p>A design that's original is showing each route by their colors in Viz 1. Normally Polylines in R are usually connected, and you can't give them seperate colors. I was able to show the routes in different colors, and labels, though I tried writing
            a for loop function, but it won't work.</p>

        <h2>Conclusion</h2>
        <ul>
            <li><b>Outcome: </b> Produt map shows routes, stops and can be zoomed. However, routes beyond the 3000th row couldn't be previewed. Possible guess, this action requires an even more higher computing RAM PC (I use a 12GB RAM Core i7 PC)</li>
            <li><b>Suggestions: </b>Data sets should be gathered monthly, so monthly differences can be tracked. The routes worked well when filtered by route id.</li>
            <li><b>Reflection: </b>The Munzner approach helped in understanding the data sets and how to approach visualisation.</li>
        </ul>

</body>

</html>